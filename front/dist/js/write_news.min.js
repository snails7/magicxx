function News(){}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFielEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),o=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),l=window.ue.getContent(),s="";s=e?"/cms/edit_news/":"/cms/WriteNewsView/",console.log(n),console.log(i),xfzajax.post({url:s,data:{title:n,category:i,desc:o,thumbnail:a,content:l,pk:e},success:function(t){200===t.code&&xfzalert.alertSuccess("恭喜！新闻发表成功！",function(){window.location.reload()})}})})},News.prototype.run=function(){var t=this;t.initUEditor(),t.listenUploadFielEvent(),t.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpZWxFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ2YWwiLCJsaXN0ZW5TdWJtaXRFdmVudCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwidGhpcyIsImF0dHIiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwiY29uc29sZSIsImxvZyIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJydW4iLCJzZWxmIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUdUQSxLQUFLQyxVQUFVQyxZQUFjLFdBQ3pCQyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVMsQ0FDOUJDLG1CQUFzQixJQUN0QkMsVUFBYSxzQkFJckJSLEtBQUtDLFVBQVVRLHNCQUF3QixXQUNuQyxJQUFJQyxFQUFZQyxFQUFFLGtCQUNsQkQsRUFBVUUsT0FBTyxXQUNiLElBQUlDLEVBQU9ILEVBQVUsR0FBR0ksTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFPSixHQUN2QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBRXRCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUZCxFQUFFLG1CQUNSZSxJQUFJTixVQVF2Q3BCLEtBQUtDLFVBQVUwQixrQkFBb0IsV0FDZmhCLEVBQUUsZUFDUmlCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE1wQixFQUFFcUIsTUFDQ0MsS0FBSyxnQkFFZEMsRUFBUXZCLEVBQUUsdUJBQXVCZSxNQUNqQ1MsRUFBV3hCLEVBQUUsMkJBQTJCZSxNQUN4Q1UsRUFBT3pCLEVBQUUsc0JBQXNCZSxNQUMvQlcsRUFBWTFCLEVBQUUsMkJBQTJCZSxNQUN6Q1ksRUFBVW5DLE9BQU9DLEdBQUdtQyxhQUVwQm5CLEVBQUssR0FFTEEsRUFERFcsRUFDTyxrQkFFQSxzQkFHVlMsUUFBUUMsSUFBSVAsR0FDWk0sUUFBUUMsSUFBSU4sR0FHWmpCLFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKYSxNQUFTQSxFQUNUQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxRQUFXQSxFQUNYUCxHQUFPQSxHQUVYUCxRQUFXLFNBQVVDLEdBQ0ssTUFBbkJBLEVBQWEsTUFDWmlCLFNBQVNDLGFBQWEsYUFBYSxXQUMvQnhDLE9BQU95QyxTQUFTQyxpQkFReEM3QyxLQUFLQyxVQUFVNkMsSUFBTSxXQUNqQixJQUFJQyxFQUFPZixLQUNYZSxFQUFLN0MsY0FDTDZDLEVBQUt0Qyx3QkFDTHNDLEVBQUtwQixxQkFJVGhCLEVBQUUsWUFDYSxJQUFJWCxNQUNWOEMiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge1xyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJyx7XHJcbiAgICAgICAgJ2luaXRpYWxGcmFtZUhlaWdodCc6IDQwMCxcclxuICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblVwbG9hZEZpZWxFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB1cGxvYWRCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xyXG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJyxmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCIjdGh1bWJuYWlsLWZvcm1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHN1Ym1pdEJ0biA9ICQoXCIjc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBidG4gPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcclxuXHJcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgdmFyIHVybCA9Jyc7XHJcbiAgICAgICAgaWYocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9uZXdzLydcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvV3JpdGVOZXdzVmlldy8nXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coY2F0ZWdvcnkpO1xyXG5cclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxyXG4gICAgICAgICAgICAgICAgJ3RodW1ibmFpbCc6IHRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcclxuICAgICAgICAgICAgICAgICdwaycgOiBwayxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ+aBreWWnO+8geaWsOmXu+WPkeihqOaIkOWKn++8gScsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5pbml0VUVkaXRvcigpO1xyXG4gICAgc2VsZi5saXN0ZW5VcGxvYWRGaWVsRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcbn0pIl19
